<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Anki使用的6个文件或文件夹 - Z.Q.K</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content=" " />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Anki使用的6个文件或文件夹" />
<meta property="og:description" content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.qiankun.info/posts/anki%E4%BD%BF%E7%94%A8%E7%9A%846%E4%B8%AA%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9/" />
<meta property="article:published_time" content="2022-05-29T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-05-29T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Anki使用的6个文件或文件夹"/>
<meta name="twitter:description" content=" "/>
<script src="https://www.qiankun.infojs/feather.min.js"></script>
	
	
        <link href="https://www.qiankun.info/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://www.qiankun.info/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css" />

	
	

	
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://www.qiankun.info">Z.Q.K</a>
	</div>
	<nav>
		
		<a href="/posts">All posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Anki使用的6个文件或文件夹</h1>
			<div class="meta">Posted on May 29, 2022</div>
		</div>
		

		<section class="body">
			<p><img src="/images/9.png" alt=""></p>
<p>Anki的每个collection会使用到6个文件或文件夹</p>
<ul>
<li>collection.anki2</li>
<li>deleted.txt</li>
<li>collection.media</li>
<li>collection.media.db2</li>
<li>media.trash</li>
<li>backups</li>
</ul>
<p><img src="/images/8.png" alt=""></p>
<p><strong>collection.anki2</strong></p>
<ul>
<li>一个sqlite数据库文件</li>
<li>所有配置、卡片等信息都保存在这个文件</li>
<li>有很多张表，包括但不限于：
<ul>
<li>deck - deck表</li>
<li>col - collection表</li>
<li>config - collection配置表</li>
<li>deck_config - deck配置表</li>
<li>cards - 卡片表</li>
<li>notetypes - note类型表</li>
<li>可以使用DB Browser for SQLite打开</li>
</ul>
</li>
</ul>
<p><strong>deleted.txt</strong></p>
<ul>
<li>一个文本文件</li>
<li>一般的编辑器都能直接打开</li>
<li>有三个字段
<ul>
<li>nid
<ul>
<li>note ID，即唯一标识</li>
<li>因为Anki不支持删除单张卡片，只支持删除note，所以只记录了note ID</li>
</ul>
</li>
<li>mid
<ul>
<li>note类型ID</li>
</ul>
</li>
<li>fields
<ul>
<li>note各字段的内容</li>
<li>误删的note可从这个文件中找回</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>collection.media</strong></p>
<ul>
<li>一个文件夹</li>
<li>保存了所有卡片用到的媒体文件，例如图片、音视频等</li>
<li>如果媒体文件很多，磁盘读写慢，导入或导出collection会耗时较久，尤其是导入</li>
<li>如果频繁使用媒体文件，这个文件夹通常是最大的</li>
</ul>
<p><strong>collection.media.db2</strong></p>
<ul>
<li>一个sqlite数据库文件</li>
<li>作用与collection.anki2类似，但主要用来管理媒体文件</li>
<li>只有两张表
<ul>
<li>media - 媒体文件记录表</li>
<li>meta - 元信息表</li>
</ul>
</li>
</ul>
<p><strong>media.trash</strong></p>
<ul>
<li>一个文件夹</li>
<li>保存了所有删除的媒体文件</li>
<li>通过Tools -&gt; Check Media -&gt; Delete Unused操作，将媒体文件从collection.media转移到此文件夹</li>
<li>通过Tools -&gt; Check Media -&gt; Restore Deleted操作，将媒体文件从此文件夹转移到collection.media</li>
<li>通过Tools -&gt; Check Media -&gt; Empty Trash将其清空</li>
</ul>
<p><strong>backups</strong></p>
<ul>
<li>一个文件夹</li>
<li>保存了所有备份的.colpkg文件</li>
<li>文件名包含了日期和时间，类似于backup-2022-05-10-07.34.17.colpkg</li>
<li>可自动生成，2.1.50+版本可通过File -&gt; Create Backup手动生成</li>
<li>生成频率和数量可通过Preferences -&gt; Backup调整</li>
</ul>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/anki">anki</a></li>
					
					<li><a href="/tags/anki%E5%8E%9F%E7%90%86">anki原理</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/zqkgo" rel="me" title="zqkgo"><i data-feather="github"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2023  © 张乾坤 |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


<script>
  feather.replace()
</script></div>
    </body>
</html>
